sudo: required
services:
  - docker
before_install:
  - docker build -t vrushabhgore/react -f ./email-frontend/DockerFile.dev ./email-frontend

script:
  - docker run -e CI=true vrushabhgore/react npm test

after_success:
  - docker build -t vrushabhgore/email-frontend ./email-frontend
  - docker build -t vrushabhgore/email-api ./email-api
  - docker build -t vrushabhgore/nginx ./nginx
  
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_ID" --password-stdin
  - docker push vrushabhgore/email-frontend
  - docker push vrushabhgore/email-api
  - docker push vrushabhgore/nginx